// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ù–ê–°–¢–†–û–ô–ö–ò API
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

var API_URL = "/api/groq";
var MODELS = ["llama-3.1-70b-versatile", "llama-3.1-8b-instant"];
var TEMPERATURE = 0.3;

var SYSTEM_PROMPT = "–¢—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É—á–µ–±–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π —à–∫–æ–ª—ã –†–æ—Å—Å–∏–∏. –í–æ–∑–≤—Ä–∞—â–∞–π –¢–û–õ–¨–ö–û JSON.";


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ì–û–¢–û–í–´–ï –ü–†–ò–ú–ï–†–´ –î–õ–Ø –†–ê–ó–ù–´–• –¢–ï–ú
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

var TOPIC_EXAMPLES = {

"–æ–∫–æ–Ω—á–∞–Ω": {
    "title": "üìù –û–∫–æ–Ω—á–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö",
    "subtitle": "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫, 3-4 –∫–ª–∞—Å—Å",
    "tasks": [
        {
            "level": "‚≠ê",
            "level_name": "–í—Å—Ç–∞–≤—å –æ–∫–æ–Ω—á–∞–Ω–∏–µ",
            "instruction": "–í—Å—Ç–∞–≤—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ. –û–ø—Ä–µ–¥–µ–ª–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ –∏ –ø–∞–¥–µ–∂.",
            "content": "",
            "elements": [
                "–Ω–∞ –ø–∞—Ä—Ç_ (–Ω–∞ —á—ë–º?)",
                "—É –¥–æ—Ä–æ–≥_ (—É —á–µ–≥–æ?)",
                "–∫ –±–∞–±—É—à–∫_ (–∫ –∫–æ–º—É?)",
                "–≤ —Ç–µ—Ç—Ä–∞–¥_ (–≤ —á—ë–º?)",
                "–±–µ–∑ —Å–æ–ª_ (–±–µ–∑ —á–µ–≥–æ?)",
                "–æ –º–∞–º_ (–æ –∫–æ–º?)"
            ],
            "answers": [
                "–Ω–∞ –ø–∞—Ä—Ç–ï (1 —Å–∫–ª., –ü.–ø.)",
                "—É –¥–æ—Ä–æ–≥–ò (1 —Å–∫–ª., –†.–ø.)",
                "–∫ –±–∞–±—É—à–∫–ï (1 —Å–∫–ª., –î.–ø.)",
                "–≤ —Ç–µ—Ç—Ä–∞–¥–ò (3 —Å–∫–ª., –ü.–ø.)",
                "–±–µ–∑ —Å–æ–ª–ò (3 —Å–∫–ª., –†.–ø.)",
                "–æ –º–∞–º–ï (1 —Å–∫–ª., –ü.–ø.)"
            ]
        },
        {
            "level": "‚≠ê‚≠ê",
            "level_name": "–ï –∏–ª–∏ –ò?",
            "instruction": "–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ: –ï –∏–ª–∏ –ò?",
            "content": "–ü–æ–º–Ω–∏: –≤ 3 —Å–∫–ª–æ–Ω–µ–Ω–∏–∏ –≤ –†.–ø., –î.–ø., –ü.–ø. –ø–∏—à–µ—Ç—Å—è –ò",
            "elements": [
                "–Ω–∞ –ø–ª–æ—â–∞–¥_ (-–µ/-–∏)",
                "–≤ –¥–µ—Ä–µ–≤–Ω_ (-–µ/-–∏)",
                "–∫ –ø–æ–¥—Ä—É–≥_ (-–µ/-–∏)",
                "–≤ —Ç–µ—Ç—Ä–∞–¥_ (-–µ/-–∏)",
                "–Ω–∞ –ª–æ—à–∞–¥_ (-–µ/-–∏)",
                "–æ –∂–∏–∑–Ω_ (-–µ/-–∏)"
            ],
            "answers": [
                "–Ω–∞ –ø–ª–æ—â–∞–¥–ò (3 —Å–∫–ª., –ü.–ø.)",
                "–≤ –¥–µ—Ä–µ–≤–Ω–ï (1 —Å–∫–ª., –ü.–ø.)",
                "–∫ –ø–æ–¥—Ä—É–≥–ï (1 —Å–∫–ª., –î.–ø.)",
                "–≤ —Ç–µ—Ç—Ä–∞–¥–ò (3 —Å–∫–ª., –ü.–ø.)",
                "–Ω–∞ –ª–æ—à–∞–¥–ò (3 —Å–∫–ª., –ü.–ø.)",
                "–æ –∂–∏–∑–Ω–ò (3 —Å–∫–ª., –ü.–ø.)"
            ]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê",
            "level_name": "–¢–µ–∫—Å—Ç —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏",
            "instruction": "–°–ø–∏—à–∏, –≤—Å—Ç–∞–≤–ª—è—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è.",
            "content": "–û—Ç –¥–µ—Ä–µ–≤–Ω_ –¥–æ —Ä–µ—á–∫_ –¥–æ—Ä–æ–≥–∞ —à–ª–∞ —á–µ—Ä–µ–∑ –ø–æ–ª–µ. –£ –¥–æ—Ä–æ–≥_ —Ä–æ—Å–ª–∞ –±–µ—Ä—ë–∑–∞. –ù–∞ –≤–µ—Ç–∫_ —Å–∏–¥–µ–ª–∞ –ø—Ç–∏—Ü–∞.",
            "elements": [
                "–æ—Ç –¥–µ—Ä–µ–≤–Ω_ ‚Üí",
                "–¥–æ —Ä–µ—á–∫_ ‚Üí",
                "—É –¥–æ—Ä–æ–≥_ ‚Üí",
                "–Ω–∞ –≤–µ—Ç–∫_ ‚Üí"
            ],
            "answers": [
                "–æ—Ç –¥–µ—Ä–µ–≤–Ω–ò (1 —Å–∫–ª., –†.–ø.)",
                "–¥–æ —Ä–µ—á–∫–ò (1 —Å–∫–ª., –†.–ø.)",
                "—É –¥–æ—Ä–æ–≥–ò (1 —Å–∫–ª., –†.–ø.)",
                "–Ω–∞ –≤–µ—Ç–∫–ï (1 —Å–∫–ª., –ü.–ø.)"
            ]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ò—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏",
            "instruction": "–ù–∞–π–¥–∏ –∏ –∏—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏ –≤ –æ–∫–æ–Ω—á–∞–Ω–∏—è—Ö.",
            "content": "",
            "elements": [
                "–î–µ—Ç–∏ –∏–≥—Ä–∞–ª–∏ –Ω–∞ –ø–ª–æ—â–∞–¥–µ.",
                "–Ø –Ω–∞–ø–∏—Å–∞–ª –ø–∏—Å—å–º–æ –±–∞–±—É—à–∫–∏.",
                "–ö–Ω–∏–≥–∞ –ª–µ–∂–∏—Ç –Ω–∞ —Å—Ç–æ–ª–∏.",
                "–ú—ã –≥–æ–≤–æ—Ä–∏–ª–∏ –æ –∂–∏–∑–Ω–µ."
            ],
            "answers": [
                "–Ω–∞ –ø–ª–æ—â–∞–¥–ò (3 —Å–∫–ª., –ü.–ø.)",
                "–±–∞–±—É—à–∫–ï (1 —Å–∫–ª., –î.–ø.)",
                "–Ω–∞ —Å—Ç–æ–ª–ï (2 —Å–∫–ª., –ü.–ø.)",
                "–æ –∂–∏–∑–Ω–ò (3 —Å–∫–ª., –ü.–ø.)"
            ]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ü–æ—Å—Ç–∞–≤—å –≤ –Ω—É–∂–Ω—ã–π –ø–∞–¥–µ–∂",
            "instruction": "–ü–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ –≤ —Å–∫–æ–±–∫–∞—Ö –≤ –Ω—É–∂–Ω—ã–π –ø–∞–¥–µ–∂.",
            "content": "",
            "elements": [
                "–ø–æ–¥–æ–π—Ç–∏ –∫ (–∏–∑–≥–æ—Ä–æ–¥—å) ‚Üí",
                "–º–µ—á—Ç–∞—Ç—å –æ (–ø—Ä–æ—Ñ–µ—Å—Å–∏—è) ‚Üí",
                "–µ—Ö–∞—Ç—å –ø–æ (–º–µ—Å—Ç–Ω–æ—Å—Ç—å) ‚Üí",
                "–¥–æ–π—Ç–∏ –¥–æ (–ø–ª–æ—â–∞–¥—å) ‚Üí"
            ],
            "answers": [
                "–∫ –∏–∑–≥–æ—Ä–æ–¥–ò (3 —Å–∫–ª., –î.–ø.)",
                "–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–ò (1 —Å–∫–ª., –ü.–ø.)",
                "–ø–æ –º–µ—Å—Ç–Ω–æ—Å—Ç–ò (3 —Å–∫–ª., –î.–ø.)",
                "–¥–æ –ø–ª–æ—â–∞–¥–ò (3 —Å–∫–ª., –†.–ø.)"
            ]
        }
    ],
    "motivation": "–û—Ç–ª–∏—á–Ω–æ! –¢—ã —Ä–∞–∑–æ–±—Ä–∞–ª—Å—è –≤ –æ–∫–æ–Ω—á–∞–Ω–∏—è—Ö! üåü"
},

"—Å–∫–ª–æ–Ω–µ–Ω": {
    "title": "üìö –°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö",
    "subtitle": "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫, 3-4 –∫–ª–∞—Å—Å",
    "tasks": [
        {
            "level": "‚≠ê",
            "level_name": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ",
            "instruction": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ.",
            "content": "1 —Å–∫–ª. ‚Äî –∂.—Ä. –∏ –º.—Ä. –Ω–∞ -–∞/-—è; 2 —Å–∫–ª. ‚Äî –º.—Ä. –∏ —Å—Ä.—Ä.; 3 —Å–∫–ª. ‚Äî –∂.—Ä. –Ω–∞ —å",
            "elements": ["–∑–µ–º–ª—è ‚Äî ?", "–∫–æ–Ω—å ‚Äî ?", "–Ω–æ—á—å ‚Äî ?", "–¥—è–¥—è ‚Äî ?", "—Å–æ–ª–Ω—Ü–µ ‚Äî ?", "–º—ã—à—å ‚Äî ?"],
            "answers": ["1 —Å–∫–ª.", "2 —Å–∫–ª.", "3 —Å–∫–ª.", "1 —Å–∫–ª.", "2 —Å–∫–ª.", "3 —Å–∫–ª."]
        },
        {
            "level": "‚≠ê‚≠ê",
            "level_name": "–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏ –ø–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º",
            "instruction": "–ó–∞–ø–∏—à–∏ —Å–ª–æ–≤–∞ –≤ —Ç—Ä–∏ —Å—Ç–æ–ª–±–∏–∫–∞.",
            "content": "–°–ª–æ–≤–∞: –º–µ—Ç–µ–ª—å, —á–µ—Ä–µ—à–Ω—è, –∫–æ—Ä–∞–±–ª—å, –∑–∞–≥–∞–¥–∫–∞, —Å—Ç–µ–ø—å, –≤–æ–¥–∞, –ª–∏—Å—Ç–æ–∫, –¥–≤–µ—Ä—å",
            "elements": ["1 —Å–∫–ª–æ–Ω–µ–Ω–∏–µ: ?", "2 —Å–∫–ª–æ–Ω–µ–Ω–∏–µ: ?", "3 —Å–∫–ª–æ–Ω–µ–Ω–∏–µ: ?"],
            "answers": ["—á–µ—Ä–µ—à–Ω—è, –∑–∞–≥–∞–¥–∫–∞, –≤–æ–¥–∞", "–∫–æ—Ä–∞–±–ª—å, –ª–∏—Å—Ç–æ–∫", "–º–µ—Ç–µ–ª—å, —Å—Ç–µ–ø—å, –¥–≤–µ—Ä—å"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê",
            "level_name": "–ü–æ–¥–±–µ—Ä–∏ —Å–ª–æ–≤–æ –¥—Ä—É–≥–æ–≥–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è",
            "instruction": "–ü–æ–¥–±–µ—Ä–∏ –±–ª–∏–∑–∫–æ–µ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é —Å–ª–æ–≤–æ –¥—Ä—É–≥–æ–≥–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è.",
            "content": "",
            "elements": ["–ø–∞–ø–∞ (1 —Å–∫–ª.) ‚Üí ?", "–ª–æ—à–∞–¥–∫–∞ (1 —Å–∫–ª.) ‚Üí ?", "–º—ã—à–∫–∞ (1 —Å–∫–ª.) ‚Üí ?", "–Ω–æ—á–∫–∞ (1 —Å–∫–ª.) ‚Üí ?"],
            "answers": ["–æ—Ç–µ—Ü (2 —Å–∫–ª.)", "–ª–æ—à–∞–¥—å (3 —Å–∫–ª.)", "–º—ã—à—å (3 —Å–∫–ª.)", "–Ω–æ—á—å (3 —Å–∫–ª.)"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ù–∞–π–¥–∏ –≤ —Ç–µ–∫—Å—Ç–µ",
            "instruction": "–í—ã–ø–∏—à–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, –æ–ø—Ä–µ–¥–µ–ª–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ.",
            "content": "–ë–∞–±—É—à–∫–∞ –ø–æ–≤–µ–ª–∞ –ù–∞–¥—é –Ω–∞ —Ñ–µ—Ä–º—É. –ù–∞ –ª—É–≥—É –ø–∞—Å–ª–∏—Å—å –ª–æ—à–∞–¥–∏. –ù–æ—á—å –±—ã–ª–∞ —Ç—ë–ø–ª–æ–π.",
            "elements": ["–í—ã–ø–∏—à–∏ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ:"],
            "answers": ["–±–∞–±—É—à–∫–∞ (1), –ù–∞–¥—é (1), —Ñ–µ—Ä–º—É (1), –ª—É–≥—É (2), –ª–æ—à–∞–¥–∏ (3), –Ω–æ—á—å (3)"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–°–ª–æ–∂–Ω—ã–µ —Å–ª—É—á–∞–∏",
            "instruction": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Å–æ–±—ã—Ö —Å–ª–æ–≤.",
            "content": "",
            "elements": ["–ø—É—Ç—å ‚Äî ?", "–≤—Ä–µ–º—è ‚Äî ?", "–∫–æ—Ñ–µ ‚Äî ?", "–ø–∞–ª—å—Ç–æ ‚Äî ?"],
            "answers": ["—Ä–∞–∑–Ω–æ—Å–∫–ª–æ–Ω—è–µ–º–æ–µ", "—Ä–∞–∑–Ω–æ—Å–∫–ª–æ–Ω—è–µ–º–æ–µ", "–Ω–µ—Å–∫–ª–æ–Ω—è–µ–º–æ–µ", "–Ω–µ—Å–∫–ª–æ–Ω—è–µ–º–æ–µ"]
        }
    ],
    "motivation": "–ú–æ–ª–æ–¥–µ—Ü! üìö"
},

"–ø–∞–¥–µ–∂": {
    "title": "üìñ –ü–∞–¥–µ–∂–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö",
    "subtitle": "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫, 3-4 –∫–ª–∞—Å—Å",
    "tasks": [
        {
            "level": "‚≠ê",
            "level_name": "–û–ø—Ä–µ–¥–µ–ª–∏ –ø–∞–¥–µ–∂",
            "instruction": "–û–ø—Ä–µ–¥–µ–ª–∏ –ø–∞–¥–µ–∂ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ.",
            "content": "",
            "elements": ["–ú–ê–õ–¨–ß–ò–ö —á–∏—Ç–∞–µ—Ç.", "–í–∏–∂—É –°–û–ë–ê–ö–£.", "–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ú–ê–ú–´.", "–ò–¥—É –∫ –ë–ê–ë–£–®–ö–ï.", "–ì–æ—Ä–∂—É—Å—å –ë–†–ê–¢–û–ú.", "–î—É–º–∞—é –æ –õ–ï–¢–ï."],
            "answers": ["–ò.–ø.", "–í.–ø.", "–†.–ø.", "–î.–ø.", "–¢.–ø.", "–ü.–ø."]
        },
        {
            "level": "‚≠ê‚≠ê",
            "level_name": "–ü–æ—Å—Ç–∞–≤—å –≤ –ø–∞–¥–µ–∂",
            "instruction": "–ü–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ –≤ –Ω—É–∂–Ω—ã–π –ø–∞–¥–µ–∂.",
            "content": "",
            "elements": ["–¥–ª—è (—Å–µ—Å—Ç—Ä–∞) ‚Üí", "–∫ (—à–∫–æ–ª–∞) ‚Üí", "—Å (–¥—Ä—É–≥) ‚Üí", "–æ (–∫–Ω–∏–≥–∞) ‚Üí"],
            "answers": ["–¥–ª—è —Å–µ—Å—Ç—Ä–´ (–†.–ø.)", "–∫ —à–∫–æ–ª–ï (–î.–ø.)", "—Å –¥—Ä—É–≥–û–ú (–¢.–ø.)", "–æ –∫–Ω–∏–≥–ï (–ü.–ø.)"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê",
            "level_name": "–í–æ–ø—Ä–æ—Å—ã –ø–∞–¥–µ–∂–µ–π",
            "instruction": "–ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∂–¥–æ–≥–æ –ø–∞–¥–µ–∂–∞.",
            "content": "",
            "elements": ["–ò.–ø. ‚Äî ?", "–†.–ø. ‚Äî ?", "–î.–ø. ‚Äî ?", "–í.–ø. ‚Äî ?", "–¢.–ø. ‚Äî ?", "–ü.–ø. ‚Äî ?"],
            "answers": ["–∫—Ç–æ? —á—Ç–æ?", "–∫–æ–≥–æ? —á–µ–≥–æ?", "–∫–æ–º—É? —á–µ–º—É?", "–∫–æ–≥–æ? —á—Ç–æ?", "–∫–µ–º? —á–µ–º?", "–æ –∫–æ–º? –æ —á—ë–º?"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ü—Ä–æ—Å–∫–ª–æ–Ω—è–π —Å–ª–æ–≤–æ",
            "instruction": "–ü—Ä–æ—Å–∫–ª–æ–Ω—è–π —Å–ª–æ–≤–æ –ö–ù–ò–ì–ê.",
            "content": "",
            "elements": ["–ò.–ø. ‚Äî", "–†.–ø. ‚Äî", "–î.–ø. ‚Äî", "–í.–ø. ‚Äî", "–¢.–ø. ‚Äî", "–ü.–ø. ‚Äî"],
            "answers": ["–∫–Ω–∏–≥–∞", "–∫–Ω–∏–≥–∏", "–∫–Ω–∏–≥–µ", "–∫–Ω–∏–≥—É", "–∫–Ω–∏–≥–æ–π", "–æ –∫–Ω–∏–≥–µ"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–°–æ—Å—Ç–∞–≤—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è",
            "instruction": "–ü–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–∞ –≤ –Ω—É–∂–Ω—ã–π –ø–∞–¥–µ–∂.",
            "content": "",
            "elements": ["(–î–µ–≤–æ—á–∫–∞) —á–∏—Ç–∞–µ—Ç (–∫–Ω–∏–≥–∞).", "–ú—ã –∏–¥—ë–º –∫ (—Ä–µ–∫–∞).", "(–ö–æ—à–∫–∞) –∏–≥—Ä–∞–µ—Ç —Å (–º—ã—à–∫–∞)."],
            "answers": ["–î–µ–≤–æ—á–∫–∞ —á–∏—Ç–∞–µ—Ç –∫–Ω–∏–≥—É.", "–ú—ã –∏–¥—ë–º –∫ —Ä–µ–∫–µ.", "–ö–æ—à–∫–∞ –∏–≥—Ä–∞–µ—Ç —Å –º—ã—à–∫–æ–π."]
        }
    ],
    "motivation": "–¢—ã –∑–Ω–∞–µ—à—å –ø–∞–¥–µ–∂–∏! üìñ"
},

"—Å–ø—Ä—è–∂–µ–Ω": {
    "title": "üî§ –°–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤",
    "subtitle": "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫, 4 –∫–ª–∞—Å—Å",
    "tasks": [
        {
            "level": "‚≠ê",
            "level_name": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–ø—Ä—è–∂–µ–Ω–∏–µ",
            "instruction": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–∞.",
            "content": "",
            "elements": ["—á–∏—Ç–∞—Ç—å ‚Äî ?", "–≥–æ–≤–æ—Ä–∏—Ç—å ‚Äî ?", "–ø–∏—Å–∞—Ç—å ‚Äî ?", "—Å–º–æ—Ç—Ä–µ—Ç—å ‚Äî ?", "–∏–≥—Ä–∞—Ç—å ‚Äî ?", "—Å—Ç—Ä–æ–∏—Ç—å ‚Äî ?"],
            "answers": ["I —Å–ø—Ä.", "II —Å–ø—Ä.", "I —Å–ø—Ä.", "II —Å–ø—Ä. (–∏—Å–∫–ª.)", "I —Å–ø—Ä.", "II —Å–ø—Ä."]
        },
        {
            "level": "‚≠ê‚≠ê",
            "level_name": "–í—Å—Ç–∞–≤—å –æ–∫–æ–Ω—á–∞–Ω–∏–µ",
            "instruction": "–í—Å—Ç–∞–≤—å –æ–∫–æ–Ω—á–∞–Ω–∏–µ –≥–ª–∞–≥–æ–ª–∞.",
            "content": "",
            "elements": ["–æ–Ω —á–∏—Ç–∞_—Ç", "–æ–Ω–∏ –≥–æ–≤–æ—Ä_—Ç", "–º—ã –ø–∏—à_–º", "—Ç—ã —Å–º–æ—Ç—Ä_—à—å", "–≤—ã –∏–≥—Ä–∞_—Ç–µ", "–æ–Ω–∞ —Å—Ç—Ä–æ_—Ç"],
            "answers": ["—á–∏—Ç–∞–ï—Ç", "–≥–æ–≤–æ—Ä–Ø—Ç", "–ø–∏—à–ï–º", "—Å–º–æ—Ç—Ä–ò—à—å", "–∏–≥—Ä–∞–ï—Ç–µ", "—Å—Ç—Ä–æ–ò—Ç"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê",
            "level_name": "–ì–ª–∞–≥–æ–ª—ã-–∏—Å–∫–ª—é—á–µ–Ω–∏—è",
            "instruction": "–ó–∞–ø–∏—à–∏ –≥–ª–∞–≥–æ–ª—ã-–∏—Å–∫–ª—é—á–µ–Ω–∏—è II —Å–ø—Ä—è–∂–µ–Ω–∏—è.",
            "content": "",
            "elements": ["4 –Ω–∞ -–ê–¢–¨:", "7 –Ω–∞ -–ï–¢–¨:"],
            "answers": ["–≥–Ω–∞—Ç—å, –¥–µ—Ä–∂–∞—Ç—å, –¥—ã—à–∞—Ç—å, —Å–ª—ã—à–∞—Ç—å", "–≤–∏–¥–µ—Ç—å, –Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å, —Å–º–æ—Ç—Ä–µ—Ç—å, –≤–µ—Ä—Ç–µ—Ç—å, –æ–±–∏–¥–µ—Ç—å, –∑–∞–≤–∏—Å–µ—Ç—å, —Ç–µ—Ä–ø–µ—Ç—å"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ï –∏–ª–∏ –ò?",
            "instruction": "–í—ã–±–µ—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–µ.",
            "content": "",
            "elements": ["–æ–Ω –¥—ã—à_—Ç", "–æ–Ω–∏ —Å–ª—ã—à_—Ç", "–º—ã –≤–∏–¥_–º", "—Ç—ã —Ç–µ—Ä–ø_—à—å"],
            "answers": ["–¥—ã—à–ò—Ç (II)", "—Å–ª—ã—à–ê—Ç (II)", "–≤–∏–¥–ò–º (II)", "—Ç–µ—Ä–ø–ò—à—å (II)"]
        },
        {
            "level": "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê",
            "level_name": "–ü—Ä–æ—Å–ø—Ä—è–≥–∞–π",
            "instruction": "–ü—Ä–æ—Å–ø—Ä—è–≥–∞–π –≥–ª–∞–≥–æ–ª –ü–ò–°–ê–¢–¨.",
            "content": "",
            "elements": ["—è ‚Äî", "—Ç—ã ‚Äî", "–æ–Ω ‚Äî", "–º—ã ‚Äî", "–≤—ã ‚Äî", "–æ–Ω–∏ ‚Äî"],
            "answers": ["–ø–∏—à—É", "–ø–∏—à–µ—à—å", "–ø–∏—à–µ—Ç", "–ø–∏—à–µ–º", "–ø–∏—à–µ—Ç–µ", "–ø–∏—à—É—Ç"]
        }
    ],
    "motivation": "–¢—ã –æ—Å–≤–æ–∏–ª —Å–ø—Ä—è–∂–µ–Ω–∏–µ! üî§"
}

};


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ü–û–°–¢–†–û–ï–ù–ò–ï –ü–†–û–ú–ü–¢–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function buildPrompt(userRequest) {
    var requestLower = userRequest.toLowerCase();
    
    var example = null;
    for (var key in TOPIC_EXAMPLES) {
        if (new RegExp(key, "i").test(requestLower)) {
            example = TOPIC_EXAMPLES[key];
            break;
        }
    }
    
    if (example) {
        return "–°–æ–∑–¥–∞–π —Ä–∞–±–æ—á–∏–π –ª–∏—Å—Ç –ø–æ—Ö–æ–∂–∏–π –Ω–∞ —ç—Ç–æ—Ç, –Ω–æ —Å –î–†–£–ì–ò–ú–ò —Å–ª–æ–≤–∞–º–∏:\n\n" +
               JSON.stringify(example, null, 2) + "\n\n" +
               "–¢–ï–ú–ê: " + userRequest + "\n\n" +
               "–í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π –î–†–£–ì–ò–ï —Å–ª–æ–≤–∞! –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON.";
    }
    
    return "–°–æ–∑–¥–∞–π 5 —É—á–µ–±–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫.\n–¢–ï–ú–ê: " + userRequest + "\n\n–í–µ—Ä–Ω–∏ JSON —Å –ø–æ–ª—è–º–∏: title, subtitle, tasks, motivation";
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –í–´–ó–û–í API
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

async function callGroqAI(userRequest, apiKey) {
    console.log("üöÄ callGroqAI –≤—ã–∑–≤–∞–Ω");
    
    for (var m = 0; m < MODELS.length; m++) {
        var model = MODELS[m];
        try {
            console.log("üîÑ –ú–æ–¥–µ–ª—å:", model);
            
            var response = await fetch(API_URL, {
                method: "POST",
                headers: {
                    "Authorization": "Bearer " + apiKey,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    model: model,
                    messages: [
                        { role: "system", content: SYSTEM_PROMPT },
                        { role: "user", content: buildPrompt(userRequest) }
                    ],
                    max_tokens: 4000,
                    temperature: TEMPERATURE
                })
            });
            
            if (response.status === 429) {
                await new Promise(function(r) { setTimeout(r, 1000); });
                continue;
            }
            
            if (!response.ok) {
                var err = {};
                try { err = await response.json(); } catch(e) {}
                throw new Error(err.error ? err.error.message : "HTTP " + response.status);
            }
            
            var data = await response.json();
            var text = data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content;
            
            if (!text) continue;
            
            console.log("üìÑ –û—Ç–≤–µ—Ç:", text.substring(0, 200));
            
            var worksheet = parseAIResponse(text);
            if (worksheet) return worksheet;
            
        } catch (error) {
            console.error("‚ùå –û—à–∏–±–∫–∞:", error.message);
            continue;
        }
    }
    
    throw new Error("–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.");
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ü–ê–†–°–ò–ù–ì –û–¢–í–ï–¢–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function parseAIResponse(text) {
    text = text.replace(/```json/gi, "").replace(/```/g, "").trim();
    
    var match = text.match(/\{[\s\S]*\}/);
    if (!match) return null;
    
    try {
        var json = JSON.parse(match[0].replace(/,\s*}/g, "}").replace(/,\s*]/g, "]"));
        
        if (!json.tasks || json.tasks.length < 1) return null;
        
        var levels = ["‚≠ê", "‚≠ê‚≠ê", "‚≠ê‚≠ê‚≠ê", "‚≠ê‚≠ê‚≠ê‚≠ê", "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"];
        
        for (var i = 0; i < json.tasks.length; i++) {
            var t = json.tasks[i];
            var elem = t.elements || [];
            var ans = t.answers || [];
            if (typeof elem === "string") elem = [elem];
            if (typeof ans === "string") ans = [ans];
            
            json.tasks[i] = {
                level: t.level || levels[i] || "‚≠ê",
                level_name: t.level_name || "–ó–∞–¥–∞–Ω–∏–µ " + (i+1),
                instruction: t.instruction || "–í—ã–ø–æ–ª–Ω–∏.",
                content: t.content || "",
                elements: elem.filter(function(x){return x;}),
                answers: ans.filter(function(x){return x;})
            };
        }
        
        json.tasks = json.tasks.filter(function(t){ return t.elements.length > 0 || t.content; });
        
        return {
            title: json.title || "–†–∞–±–æ—á–∏–π –ª–∏—Å—Ç",
            subtitle: json.subtitle || "",
            tasks: json.tasks,
            motivation: json.motivation || "–ú–æ–ª–æ–¥–µ—Ü! ‚≠ê"
        };
        
    } catch (e) {
        console.error("‚ùå –ü–∞—Ä—Å–∏–Ω–≥:", e.message);
        return null;
    }
}